<form>
    <div class="card mb-2">
    <div class="card-header">Estado actual de conexión</div>
    <div class="card-body">

    <div class="row">
        <div class="mb-4 col-sm-6">
            <div class="row">
                <legend class="col-form-label col">ID de cliente MQTT:</legend>
                <div class="col-form-label col">
                    <span id="mqtt_clientid" >???</span>
                </div>
            </div>
            </div>
        <div class="mb-4 col-sm-6">
            <div class="row">
                <legend class="col-form-label col">Soporte SSL/TLS:</legend>
                <div class="col-form-label col">
                    <h5>
                    <span id="tls_capable" class="badge bg-secondary">???</span>
                    </h5>
                </div>
            </div>
        </div>
        <div class="mb-4 col-sm-6">
            <div class="row">
                <legend class="col-form-label col">Estado MQTT:</legend>
                <div class="col-form-label col">
                    <h5>
                    <span id="mqtt_connstatus" class="badge bg-danger">DESCONECTADO</span>
                    <span id="mqtt_disconnected_reason">???</span>
                    </h5>
                </div>
            </div>
        </div>
    </div>

    </div>
    </div>


    <div class="card mb-2">
        <div class="card-header">Parámetros de conexión</div>
        <div class="card-body">

    <div class="row">
        <div class="mb-4 col-sm-8">
            <label class="form-label" for="mqtthost">Broker MQTT para envío de datos:</label>
            <input type="text" id="mqtthost" name="mqtthost" class="form-control" placeholder="mqtt.example.com"
                aria-describedby="mqtthostAyuda" value="" required />
            <small id="mqtthostAyuda" class="form-text d-block text-muted">Nombre de host o IP del broker MQTT que recibe la telemetría</small>
        </div>
        <div class="mb-4 col-sm-4">
            <label class="form-label" for="mqttport">Puerto TCP/IP para MQTT:</label>
            <input type="number" id="mqttport" name="mqttport" class="form-control" placeholder="1883"
                aria-describedby="mqttportAyuda" value="" min="1" max="65535" required />
            <small id="mqttportAyuda" class="form-text d-block text-muted">Puerto TCP/IP de broker MQTT que recibe la telemetría</small>
        </div>
    </div>
    <div class="row topic-capable" style="display: none;">
        <div class="mb-4 col">
            <label for="topic">Plantilla tópico MQTT:</label>
            <input type="text" id="topic" name="topic" class="form-control" placeholder="topic/para/org/{YBXID}"
                aria-describedby="topicAyuda" value="" />
            <small id="topicAyuda" class="form-text text-muted">Plantilla para construir el tópico o prefijo base en lugar del usado
                normalmente por este firmware. Toda ocurrencia de <code>{YBXID}</code> será reemplazada por el identificador de
                dispositivo (normalmente de la forma YUBOX-{MAC}).
            </small>
        </div>
    </div>
    <div class="mb-4 mqtt-tls" style="display: none;">
        <div class="row">
            <legend class="col-form-label col-sm-4 pt-0">Nivel TLS:</legend>
            <div class="btn-group col-sm-8" role="group">
                <input type="radio" class="btn-check" name="tls_verifylevel" id="tls_verifylevel_0" value="0" autocomplete="off">
                <label class="btn btn-secondary" for="tls_verifylevel_0">Sin encriptar</label>

                <input type="radio" class="btn-check" name="tls_verifylevel" id="tls_verifylevel_1" value="1" autocomplete="off">
                <label class="btn btn-secondary" for="tls_verifylevel_1">TLS, sin cert.</label>

                <input type="radio" class="btn-check" name="tls_verifylevel" id="tls_verifylevel_2" value="2" autocomplete="off">
                <label class="btn btn-secondary" for="tls_verifylevel_2">TLS, cert. SERVIDOR</label>

                <input type="radio" class="btn-check" name="tls_verifylevel" id="tls_verifylevel_3" value="3" autocomplete="off">
                <label class="btn btn-secondary" for="tls_verifylevel_3">TLS, SERV. y CLIENTE</label>
            </div>
            <small id="tls_verifylevelAyuda" class="form-text d-block text-muted">Si el certificado requerido no está presente, se procederá a conectar SIN VERIFICACIÓN.</small>
        </div>
    </div>
    <div class="mb-4">
        <div class="row">
            <legend class="col-form-label col-sm-4 pt-0">Transporte MQTT:</legend>
            <div class="btn-group col-sm-8" role="group">
                <input type="radio" class="btn-check" name="mqttws" id="off" value="0" autocomplete="off">
                <label class="btn btn-secondary" for="off">TCP/IP</label>

                <input type="radio" class="btn-check" name="mqttws" id="on" value="1" autocomplete="off">
                <label class="btn btn-secondary" for="on">Websockets</label>
            </div>
        </div>
    </div>
    <div class="mb-4 mqtt-ws" style="display: none;">
        <div class="row">
            <legend class="col-form-label col-sm-4 pt-0">URI Websocket en servidor:</legend>
            <div class="col-sm-8">
                <input type="text" id="wsuri" name="wsuri" class="form-control" placeholder="/websockets/mqtt" value="" />
            </div>
        </div>
    </div>
    <div class="mb-4">
        <div class="row">
        <legend class="col-form-label col-sm-4 pt-0">Autenticación MQTT:</legend>
        <div class="btn-group col-sm-8" role="group">
            <input type="radio" class="btn-check" name="mqttauth" id="off" value="off" autocomplete="off">
            <label class="btn btn-secondary" for="off">Abierta</label>

            <input type="radio" class="btn-check" name="mqttauth" id="on" value="on" autocomplete="off">
            <label class="btn btn-secondary" for="on">Contraseña</label>
        </div>
        </div>
    </div>
    <div class="row mqttauth">
        <div class="mb-4 col-sm-6">
            <label class="form-label" for="mqttuser">Nombre de usuario:</label>
            <input type="text" id="mqttuser" name="mqttuser" class="form-control"
                aria-describedby="mqttuserAyuda" value="" />
            <small id="mqttuserAyuda" class="form-text d-block text-muted">Nombre de usuario para autenticación MQTT</small>
        </div>
        <div class="mb-4 col-sm-6">
            <label class="form-label" for="mqttpass">Contraseña:</label>
            <input type="password" id="mqttpass" name="mqttpass" class="form-control"
                aria-describedby="mqttpassAyuda" value="" />
            <small id="mqttpassAyuda" class="form-text d-block text-muted">Contraseña para autenticación MQTT</small>
        </div>
    </div>
    <div class="mb-4">
        <label for="mqttsec">Intervalo de transmisión de payload:</label>
        <input type="number" id="mqttsec" name="mqttsec" class="form-control" list="mqttsec_common"
            placeholder="30" aria-describedby="mqttsec_help" value="" />
        <small id="mqttsec_help" class="form-text text-muted">Intervalo de transmisión deseada de datos
            de aplicación, en segundos.</small>
        <datalist id="mqttsec_common">
            <option value="10" />
            <option value="30" />
            <option value="60" />
            <option value="300" />
            <option value="600" />
            <option value="1200" />
            <option value="3600" />
        </datalist>
    </div>

    <button type="button" class="btn btn-primary" name="apply">Actualizar</button>

    <button type="button" class="btn btn-danger" name="forget">Olvidar</button>

        </div>
    </div>

</form>


<div class="card mb-2 mqtt-tls" style="display: none;">
    <div class="card-header">Archivos de certificados PEM</div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
    <form>
        <div class="mb-4 row">
            <legend class="col-form-label col-sm-auto">Certificado raíz en dispositivo:</legend>
            <div class="col-form-label col">
                <h5><span id="tls_servercert_present" class="badge bg-warning">???</span></h5>
            </div>
        </div>
        <div class="mb-4">
            <label class="form-label" for="tls_servercert">Certificado raíz serv.:</label>
            <input type="file" class="form-control" id="tls_servercert">
        </div>
        <div class="mb-4">
            <button type="button" class="btn btn-primary" name="tls_servercert_upload">Actualizar</button>
        </div>
    </form>
            </div>
            <div class="col-md-6">
    <form>
        <div class="mb-4 row">
            <legend class="col-form-label col-sm-auto">Certificado cliente en dispositivo:</legend>
            <div class="col-form-label col">
                <h5><span id="tls_clientcert_present" class="badge bg-warning">???</span></h5>
            </div>
        </div>
        <div class="mb-4">
            <label class="form-label" for="tls_clientcert" id="lbl-tls_clientcert">Certificado cliente:</label>
            <input type="file" class="form-control" id="tls_clientcert">
        </div>
        <div class="mb-4">
            <label class="form-label" for="tls_clientkey" id="lbl-tls_clientkey">Clave privada cliente:</label>
            <input type="file" class="form-control" id="tls_clientkey">
        </div>
        <div class="mb-4">
            <button type="button" class="btn btn-primary" name="tls_clientcert_upload">Actualizar</button>
        </div>
    </form>
            </div>
        </div>
    </div>
</div>
